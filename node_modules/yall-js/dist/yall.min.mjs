/*yall.js 2.3.0*/
export default function(e){e||(e={});const t="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,o="requestIdleCallback"in window,r=[[document,"scroll"],[document,"touchmove"],[window,"resize"],[window,"orientationchange"]],n=e.lazyClass||"lazy",s=e.lazyBackgroundClass||"lazy-bg",a=e.idleLoadTimeout||100,i=e.threshold||200,l=e.observeChanges||!1,c=`img.${n},video.${n},iframe.${n},.${s}`,d=["srcset","src","poster"],u={timeout:a},b=e=>[].slice.call(e),g=t=>{switch(t.nodeName){case"IMG":let e=t.parentNode;"PICTURE"==e.nodeName&&b(e.querySelectorAll("source")).forEach(e=>{h(e)}),h(t);break;case"VIDEO":b(t.querySelectorAll("source")).forEach(e=>{h(e)}),h(t),t.autoplay&&t.load();break;case"IFRAME":h(t)}t.classList.contains(s)&&(t.classList.remove(s),t.classList.add(e.lazyBackgroundLoaded||"lazy-bg-loaded"))},h=e=>{d.forEach(t=>{t in e.dataset&&(e[t]=e.dataset[t])})},v=()=>{let t=!1;!t&&m.length&&(t=!0,setTimeout(()=>{m.forEach(e=>{e.getBoundingClientRect().top<=window.innerHeight+i&&e.getBoundingClientRect().bottom>=-i&&"none"!=getComputedStyle(e).display&&(o&&a?requestIdleCallback(()=>{g(e)},u):g(e),e.classList.remove(n),m=m.filter(t=>t!=e))}),t=!1,m.length||l||r.forEach(e=>{e[0].removeEventListener(e[1],v)})},e.throttleTime||200))};let m=b(document.querySelectorAll(c));if(/(google|bing|yandex|duckduck)bot/i.test(navigator.userAgent))m.forEach(e=>{g(e)});else{if(t){var f=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let r=e.target;o&&a?requestIdleCallback(()=>{g(r)},u):g(r),r.classList.remove(n),t.unobserve(r),m=m.filter(e=>e!=r)}})},{rootMargin:`${i}px 0%`});m.forEach(e=>{f.observe(e)})}else r.forEach(e=>{e[0].addEventListener(e[1],v)}),v();"MutationObserver"in window&&l&&new MutationObserver(e=>{e.forEach(()=>{b(document.querySelectorAll(c)).forEach(e=>{-1==m.indexOf(e)&&(m.push(e),t?f.observe(e):v())})})}).observe(document.querySelector(e.observeRootSelector||"body"),e.mutationObserverOptions||{childList:!0,subtree:!0})}}
